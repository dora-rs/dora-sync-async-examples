communication:
  zenoh:
    prefix: /foo

nodes:
  - id: sender
    custom:
      run: cargo run --bin sender --release
      outputs:
        - image
      inputs:
        ready_0: tokio_spawn_blocking/ready
        ready_1: rayon_spawn/ready
  - id: rayon_spawn
    custom:
      run: cargo run --bin rayon_spawn --release
      inputs:
        image: sender/image
      outputs:
        - ready
   # After https://github.com/dora-rs/dora/pull/44, the rayon thread will be configurable from the YAML
   #   env:
   #     RAYON_NUM_THREADS: 1
  - id: tokio_spawn_blocking
    custom:
      run: cargo run --bin tokio_spawn_blocking --release
      # run: flamegraph -o tokio_spawn_blocking.svg -- ./target/release/tokio_spawn_blocking
      inputs:
        image: sender/image
      outputs:
        - ready
